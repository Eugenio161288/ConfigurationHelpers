This template can be used to provision limited access to your resources via NSG.
Idea is as following - pass 2 arrays with IPs and Names, and port to allow - and template will allow you at to grant access to this port and IPs

Based on suggestion in this issue: https://github.com/Azure/azure-powershell/issues/1817